<!doctype html>
<html lang="en">
  <head>
    <script src="https://getbootstrap.com/docs/5.3/assets/js/color-modes.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sounds of the Solar System</title>
    <link rel="icon" href="./assets/Solar_System_Sounds_Icon.ico" type="image/x-icon" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- This script tag bootstraps PyScript -->
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.3/core.css">
    <script type="module" src="https://pyscript.net/releases/2024.1.3/core.js"></script>
    <style>
      .navbar-nav>li>a {
        color: #1B1A55;
      }

      .navbar-nav>li.active>a {
        color: #9290C3 !important;
      }

      .cond-pl {
        padding-left: 0px;
      }

      @media only screen and (max-width: 1020px) {
        .cond-pl {
          padding-left: 50px;
        }
      }
    </style>
  </head>
  <body style="background-color: #18122B;">
    <!--<py-config>"packages" = ["numpy", "astropy", "astroquery"]</py-config><py-script></py-script>-->
    <header class="sticky-top">
      <nav class="navbar navbar-expand-lg" id="navbar" style="background-color: #070F2B; padding-top: 15px;">
        <div class="container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar_items" aria-expanded="false">
            <img src=".\assets\Solar_System_Sounds_Logo.png" width=50>
          </button>
          <div class="collapse navbar-collapse d-lg-flex" id="navbar_items">
            <ul class="navbar-nav col-lg-12 justify-content-lg-center me-auto mb-2" style="font-family: 'Josefin Sans', sans-serif; font-size: x-large;">
              <li class="nav-item">
                <a class="nav-link cond-pl" href="#scrollspyHeading1">Product</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#scrollspyHeading2" style="padding-left: 50px;">Features</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#scrollspyHeading3" style="padding-left: 50px;">Enterprise</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#scrollspyHeading4" style="padding-left: 50px;">Support</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <div data-bs-spy="scroll" data-bs-target="#navbar" data-bs-root-margin="0px 0px -40%" data-bs-smooth-scroll="true" class="scrollspy-example" tabindex="0">
      <div class="p-3" style="background-image: linear-gradient(#070F2A, #18122B);" id="scrollspyHeading1">
        <!-- Background image -->
        <div class="p-5 text-center bg-image rounded-3" style="
               background-image: url('./assets/Solar_System_Sonuds_Banner.png');
               background-color: rgba(0, 0, 0, 0.8);
               background-size: cover;
               background-repeat: no-repeat;
               background-position: center;
               height: 625px;
               ">
          <div class="d-flex justify-content-center align-items-center h-100">
            <div class="text-white">
              <img src=".\assets\Solar_System_Sounds_Logo.png" width=200>
              <h1 class="display-2">
                <strong>Sounds of the Solar System</strong>
              </h1>
              <div class="d-inline-flex gap-2 mb-5">
                <button class="btn btn-outline-secondary btn-lg px-4 rounded-pill" type="button" onclick="document.getElementById('scrollspyHeading3').scrollIntoView({ block: 'center', behavior: 'smooth' })"> Learn More </button>
              </div>
            </div>
          </div>
        </div>
        <!-- Background image -->
      </div>
      <div id="scrollspyHeading2">
        <div class="p-5">
          <hr>
          <br>
          <h2>First heading</h2>
          <p>This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.</p>
          <p>This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.</p>
        </div>
        <div style="width: 100%; background-image: linear-gradient(#18122B, #070F2A, #18122B);">
          <canvas id="planets" style="display: block; margin-left: auto; margin-right: auto; width: 80%; height: 100%; border: solid black; border-radius: 12px;"></canvas>
        </div>
        <br>
        <div style="display: block; width: 90%; margin-left: auto; margin-right: auto; text-align:center;" class="d-block">
          <a type="button" class="btn btn-lg" onclick="context.resume(); playPlanet(0);">
            <img src="./assets/planets/Mercury.png" width="48" height="48" style="filter: blur(0.5px);" />
            <br>
            <p id="Mercury">1440hz</p>
          </a>
          <a type="button" class="btn btn-lg" onclick="context.resume(); playPlanet(1);">
            <img src="./assets/planets/Venus.png" width="48" height="48" style="filter: blur(0.5px);" />
            <br>
            <p id="Venus">1440hz</p>
          </a>
          <a type="button" class="btn btn-lg" onclick="context.resume(); playPlanet(2);">
            <img src="./assets/planets/Earth.png" width="48" height="48" style="filter: blur(0.5px);" />
            <br>
            <p id="Earth">1440hz</p>
          </a>
          <a type="button" class="btn btn-lg" onclick="context.resume(); playPlanet(3);">
            <img src="./assets/planets/Mars.png" width="48" height="48" style="filter: blur(0.5px);" />
            <br>
            <p id="Mars">1440hz</p>
          </a>
          <a type="button" class="btn btn-lg" onclick="context.resume(); playPlanet(4);">
            <img src="./assets/planets/Jupiter.png" width="48" height="48" style="filter: blur(0.5px);" />
            <br>
            <p id="Jupiter">1440hz</p>
          </a>
          <a type="button" class="btn btn-lg" onclick="context.resume(); playPlanet(5);">
            <img src="./assets/planets/Saturn.png" width="64" height="48" style="filter: blur(0.5px);" />
            <br>
            <p id="Saturn">1440hz</p>
          </a>
          <a type="button" class="btn btn-lg" onclick="context.resume(); playPlanet(6);">
            <img src="./assets/planets/Uranus.png" width="48" height="48" style="filter: blur(0.5px);" />
            <br>
            <p id="Uranus">1440hz</p>
          </a>
          <a type="button" class="btn btn-lg" onclick="context.resume(); playPlanet(7);">
            <img src="./assets/planets/Neptune.png" width="48" height="48" style="filter: blur(0.5px);" />
            <br>
            <p id="Neptune">1440hz</p>
          </a>
          <a type="button" class="btn btn-lg" onclick="context.resume(); playAllPlanets();">
            <img src="./assets/Solar_System_Sounds_Logo.png" width="48" height="48" />
            <p>All</p>
          </a>
        </div>
        <br>
        <br>
      </div>
      <div class="p-3" style="background-color: #3D3B40;" id="scrollspyHeading3">
        <br>
        <h2 style="font-family: 'Josefin Sans', sans-serif; font-size: xx-large; text-align: center;">INSPIRATIONS</h2>
        <div class="album py-5">
          <div class="container">
            <div class="row row-cols-1 row-cols-md-1 row-cols-lg-3 g-4">
              <div class="col">
                <div class="card shadow-sm">
                  <img src="https://images.igdb.com/igdb/image/upload/t_original/ar89t.jpg" class="card-img-top" style="object-fit: cover;" width="100%" height="300" alt="Outer Wilds">
                  <div class="card-body">
                    <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-secondary" onclick="window.open('https://www.mobiusdigitalgames.com/outer-wilds.html','_blank')">Learn More</button>
                      </div>
                      <small class="text-body-secondary">Outer Wilds</small>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card shadow-sm">
                  <img src="https://www.fromoldbooks.org/Sibly-Astrology/pages/071-The-Harmony-of-the-World/071-The-Harmony-of-the-World-q50-1100x1484.jpg" class="card-img-top" style="object-fit: cover;" width="100%" height="300" alt="Musica Universalis">
                  <div class="card-body">
                    <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-secondary" onclick="window.open('https://en.wikipedia.org/wiki/Musica_universalis','_blank')">Learn More</button>
                      </div>
                      <small class="text-body-secondary">Musica Universalis</small>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card shadow-sm">
                  <img src="https://i.pinimg.com/736x/74/8c/96/748c96efb06ff70462b12cc9c966749d.jpg" class="card-img-top" style="object-fit: cover;" width="100%" height="300" alt="In the Sky">
                  <div class="card-body">
                    <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                    <div class="d-flex justify-content-between align-items-center">
                      <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-secondary" onclick="window.open('https://in-the-sky.org','_blank')">Learn More</button>
                      </div>
                      <small class="text-body-secondary">The Planets Today</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="p-3" id="scrollspyHeading4">
        <h2>First heading</h2>
        <p>This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.</p>
        <p>This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.</p>
        <br>
      </div>
    </div>
    <div class="container">
      <footer class="py-3 my-4">
        <ul class="nav justify-content-center border-bottom pb-3 mb-3">
          <li>
            <a class="text-body-secondary" href="#">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
                <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8" />
              </svg>
            </a>
          </li>
          <li class="ms-3">
            <a class="text-body-secondary" href="#">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16">
                <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z" />
              </svg>
            </a>
          </li>
          <li class="ms-3">
            <a class="text-body-secondary" href="#">
              <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 512 512">
                <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                <path fill="#dee2e6" d="M71.9 34.8C50.2 47.7 7.4 96.8 7 109.7v21.3c0 27.1 25.3 50.8 48.3 50.8 27.6 0 50.5-22.9 50.5-50 0 27.1 22.2 50 49.8 50s49-22.9 49-50c0 27.1 23.6 50 51.2 50h.5c27.6 0 51.2-22.9 51.2-50 0 27.1 21.5 50 49 50s49.8-22.9 49.8-50c0 27.1 23 50 50.5 50 23 0 48.3-23.8 48.3-50.8v-21.3c-.4-12.9-43.2-62.1-64.9-75C372.6 32.4 325.8 32 256 32S91.1 33.1 71.9 34.8zm132.3 134.4c-22 38.4-77.9 38.7-99.9 .3-13.2 23.1-43.2 32.1-56 27.7-3.9 40.2-13.7 237.1 17.7 269.2 80 18.7 302.1 18.1 379.8 0 31.7-32.3 21.3-232 17.8-269.2-12.9 4.4-42.9-4.6-56-27.7-22 38.5-77.9 38.1-99.9-.2-7.1 12.5-23.1 28.9-51.8 28.9a57.5 57.5 0 0 1 -51.8-28.9zm-41.6 53.8c16.5 0 31.1 0 49.2 19.8a436.9 436.9 0 0 1 88.2 0C318.2 223 332.9 223 349.3 223c52.3 0 65.2 77.5 83.9 144.5 17.3 62.2-5.5 63.7-34 63.7-42.2-1.6-65.5-32.2-65.5-62.8-39.3 6.4-101.9 8.8-155.6 0 0 30.6-23.3 61.2-65.5 62.8-28.4-.1-51.2-1.6-33.9-63.7 18.7-67 31.6-144.5 83.9-144.5zM256 270.8s-44.4 40.8-52.4 55.2l29-1.2v25.3c0 1.6 21.3 .2 23.3 .2 11.7 .5 23.3 1 23.3-.2v-25.3l29 1.2c-8-14.5-52.4-55.2-52.4-55.2z" />
              </svg>
            </a>
          </li>
          <li class="ms-3">
            <a class="text-body-secondary" href="#">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
                <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1" />
              </svg>
            </a>
          </li>
        </ul>
        <p class="text-center text-body-secondary">
          <span class="mb-3 mb-md-0 text-body-secondary">© 2024 - Ph0nsy</span>
        </p>
      </footer>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./scripts/canvas.js"></script>
    <script>
      const pi = Math.PI;
      const notes = [
        [16.35, 32.70, 65.41, 130.8, 261.6, 523.3, 1047, 2093, 4186], // C_n (Mercury)
        [18.35, 36.71, 73.42, 146.8, 293.7, 587.3, 1175, 2349, 4699], // D_n (Venus)
        [20.60, 41.20, 82.41, 164.8, 329.6, 659.3, 1319, 2637, 5274], // E_n (Earth)
        [21.83, 43.65, 87.31, 174.6, 349.2, 698.5, 1397, 2794, 5588], // F_n (Mars)
        [24.50, 49.00, 98.00, 196.0, 392.0, 784.0, 1568, 3136, 6272], // G_n (Jupiter)
        [27.50, 55.00, 110.0, 220.0, 440.0, 880.0, 1760, 3520, 7040], // A_n (Saturn)
        [30.87, 61.74, 123.5, 246.9, 493.9, 987.8, 1976, 3951, 7902], // B_n (Uranus)
        [32.70, 65.41, 130.8, 261.6, 523.3, 1047, 2093, 4186, 16.35] // C_n+1 (Neptune)
      ]
      const planetsId = ["Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune"];
      const planetsImg = ["./assets/planets/Mercury.png", "./assets/planets/Venus.png", "./assets/planets/Earth.png", "./assets/planets/Mars.png", "./assets/planets/Jupiter.png", "./assets/planets/Saturn.png", "./assets/planets/Uranus.png", "./assets/planets/Neptune.png"];
      const planetsSize = [0.015, 0.02, 0.025, 0.025, 0.055, 0.055, 0.04, 0.04];
      const today = new Date();
      const formatedToday = today.getFullYear() + '-' + (today.getMonth() < 9 ? '0' + (today.getMonth() + 1) : (today.getMonth() + 1)) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate());
      let planetsData;
      document.addEventListener("loadedJSON", function() {
        console.log(planetsData);
      });
      $.ajax({
        type: "Get",
        url: "./assets/data/2024_planets_octants.json",
        dataType: "json",
        success: function(data) {
          planetsData = data;
          for (var i = 0; i < planetsId.length; i++) {
            document.getElementById(planetsId[i]).innerHTML = notes[i][planetsData[formatedToday][i]] + " Hz";
          }
          const c = document.getElementById("planets");
          const ctx = c.getContext("2d");
          width = ctx.canvas.width;
          height = ctx.canvas.height;
          for (var i = 0; i < planetsId.length; i++) {
            const img = new Image();
            img.src = planetsImg[i];
            x = ((height < width ? height : width) * .06 * (i + 1)) + (i < 4 ? 0 : i);
            y = 0;
            x_ = (x * Math.cos(-20 * (pi / 180) + (planetsData[formatedToday][i] * -40 * (pi / 180)))) - (y * Math.sin(-20 * (pi / 180) + (planetsData[formatedToday][i] * -40 * (pi / 180)))) + width / 2;
            y_ = (y * Math.cos(-20 * (pi / 180) + (planetsData[formatedToday][i] * -40 * (pi / 180)))) + (x * Math.sin(-20 * (pi / 180) + (planetsData[formatedToday][i] * -40 * (pi / 180)))) + height / 2;
            sidePlanet = Math.round((ctx.canvas.height < ctx.canvas.width ? ctx.canvas.height : ctx.canvas.width) * planetsSize[i] * 10) / 10;
            if (i != 5) {
              ctx.drawImage(img, x_ - (sidePlanet / 2), y_ - (sidePlanet / 2), sidePlanet, sidePlanet);
            } else {
              ctx.drawImage(img, x_ - (sidePlanet * 0.75), y_ - (sidePlanet / 2), sidePlanet * 1.5, sidePlanet);
            }
          }
          document.dispatchEvent(new Event("loadedJSON"));
        },
        error: function() {
          console.log("json not found");
        }
      });
      window.addEventListener('resize', () => {
        console.log("Hanlo")
        for (var i; i < planetsId.length; i++) {
          const img = new Image();
          img.src = planetsImg[i];
          const c = document.getElementById("planets");
          const ctx = c.getContext("2d");
          width = ctx.canvas.width;
          height = ctx.canvas.height;
          x = ((height < width ? height : width) * .06 * (i + 1)) + (i < 4 ? 0 : i) - (width / 2);
          y = 0;
          x_ = (x * Math.cos(-20 * (pi / 180) + (planetsData[formatedToday][i] * -40 * (pi / 180)))) - (y * Math.sin(-20 * (pi / 180) + (planetsData[formatedToday][i] * -40 * (pi / 180)))) + width / 2;
          y_ = (y * Math.cos(-20 * (pi / 180) + (planetsData[formatedToday][i] * -40 * (pi / 180)))) + (x * Math.sin(-20 * (pi / 180) + (planetsData[formatedToday][i] * -40 * (pi / 180)))) + height / 2;
          sidePlanet = Math.round((ctx.canvas.height < ctx.canvas.width ? ctx.canvas.height : ctx.canvas.width) * planetsSize[i] * 10) / 10;
          if (i != 5) {
            ctx.drawImage(img, x_ - (planetsSize[i] / 2), y_ - (planetsSize[i] / 2), planetsSize[i], planetsSize[i]);
          } else {
            ctx.drawImage(img, x_ - (planetsSize[i] * 0.75), y_ - (planetsSize[i] / 2), planetsSize[i] * 1.5, planetsSize[i]);
          }
          console.log("Resize: (" + x_ + ", " + y_ + ")");
        }
      });
      var context = new AudioContext();
      var o = null;
      var g = null;

      function playNote(frequency, type) {
        setTimeout(function() {
          o = context.createOscillator();
          g = context.createGain();
          o.type = type;
          o.connect(g);
          o.frequency.value = frequency;
          g.connect(context.destination);
          o.start(0);
          g.gain.exponentialRampToValueAtTime(0.00001, context.currentTime + 1);
        }, 100)
      }

      function playPlanet(planetIdx) {
        playNote(notes[planetIdx][planetsData[formatedToday][planetIdx]], 'sine');
      }

      function playAllPlanets() {
        const notesToday = [
          notes[0][planetsData[formatedToday][0]],
          notes[1][planetsData[formatedToday][1]],
          notes[2][planetsData[formatedToday][2]],
          notes[3][planetsData[formatedToday][3]],
          notes[4][planetsData[formatedToday][4]],
          notes[5][planetsData[formatedToday][5]],
          notes[6][planetsData[formatedToday][6]],
          notes[7][planetsData[formatedToday][7]]
        ]
        noteDifferences = []
        for (var i = 0; i < notesToday.length; i++) {
          for (var j = 0; j < notesToday.length; j++) {
            if (i != j) {
              noteDifferences.push(Math.abs(notesToday[i] - notesToday[j]));
            }
          }
        }
        averageNote = (noteDifferences.reduce((a, b) => a + b, 0) / noteDifferences.length) || 0;
        playNote(averageNote, 'sine'); // Play combination tone (average difference between tones)
      }
    </script>
  </body>
</html>